(function(t){function e(e){for(var n,a,i=e[0],c=e[1],u=e[2],d=0,m=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&m.push(r[a][0]),r[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(m.length)m.shift()();return o.push.apply(o,u||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],n=!0,i=1;i<s.length;i++){var c=s[i];0!==r[c]&&(n=!1)}n&&(o.splice(e--,1),t=a(a.s=s[0]))}return t}var n={},r={app:0},o=[];function a(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=n,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(s,n,function(e){return t[e]}.bind(null,n));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},1:function(t,e){},1843:function(t,e,s){"use strict";var n=s("cf6e"),r=s.n(n);r.a},"4d75":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-navbar",{attrs:{type:"dark",variant:"dark"}},[s("b-navbar-brand",[t._v(" Planning Poker")])],1),s("router-view")],1)},o=[],a=s("2877"),i={},c=Object(a["a"])(i,r,o,!1,null,null,null),u=c.exports,l=s("8c4f"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-jumbotron",{staticClass:"app"},[s("h1",[t._v("Welcome to the Planning Poker!")]),s("div",[s("h2",[t._v("Start a new Planning poker session")]),s("p",[t._v("you will be the Game Master")]),s("div",[s("b-button",{staticClass:"m-3",attrs:{variant:"info",size:"lg"},on:{click:t.newSessionHandler}},[t._v("start")])],1),t.startSessionError.error?s("b-alert",{staticClass:"m-2 w-25 mx-auto",attrs:{show:"",variant:"danger"}},[t._v(t._s(t.startSessionError.message))]):t._e()],1),s("hr"),s("p",{staticClass:"m-5"},[t._v("OR")]),s("hr"),s("div",[s("h2",[t._v("Join an existing Session")]),s("p",[t._v("you'll need a Session ID provided to you by the Game Master")]),s("div",{staticClass:"m-3"},[s("p",[t._v("Session ID")]),s("b-input-group",{staticClass:"w-50 mb-1 mx-auto"},[s("b-form-input",{model:{value:t.sessionID,callback:function(e){t.sessionID=e},expression:"sessionID"}})],1),t.sessionIDError.error?s("b-alert",{staticClass:"w-50 mb-1 mx-auto",attrs:{show:"",variant:"danger"}},[t._v(t._s(t.sessionIDError.message))]):t._e()],1),s("div",{staticClass:"m-3"},[s("p",[t._v("Your nickname")]),s("b-input-group",{staticClass:"w-50 mb-1 mx-auto"},[s("b-form-input",{model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}})],1),t.nicknameError.error?s("b-alert",{staticClass:"w-50 mb-1 mx-auto",attrs:{show:"",variant:"danger"}},[t._v(t._s(t.nicknameError.message))]):t._e(),s("div",[s("b-button",{staticClass:"m-3",attrs:{variant:"primary",size:"lg"},on:{click:t.joinSessionHandler}},[t._v("join")])],1)],1)])])},m=[],h=(s("99af"),s("498a"),s("96cf"),s("1da1")),f=s("bc3a"),v=s.n(f);s("d81d"),s("b0c0"),s("b64b"),s("ac1f"),s("1276");function p(t){var e=t.split("-");return 3===e.length&&3===e[0].length&&4===e[1].length&&3===e[2].length&&!/[^a-z]/.test(e[0])&&!/[^a-z]/.test(e[1])&&!/[^a-z]/.test(e[2])}function b(t){return!/[^a-zA-Z]/.test(t)}function _(t,e){var s=[];for(var n in e)n===t&&"00000"!==e[n].name?(e[n].name="*"+e[n].name,s.unshift(e[n])):n!==t&&"00000"!==e[n].name&&s.push(e[n]);return s}function g(t,e){return delete e[t],Object.keys(e).map((function(t){return e[t]}))}var k={name:"WelcomeScreen",data:function(){return{endpoint:"/",sessionID:"",nickname:"",startSessionError:{error:!1,message:""},sessionIDError:{error:!1,message:""},nicknameError:{error:!1,message:""}}},methods:{newSessionHandler:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.startSessionError.error=!1,t.next=3,v.a.get(this.endpoint);case 3:e=t.sent,e.data.sessionID?this.$router.push("/master/session/".concat(e.data.sessionID)):this.startSessionError={error:!0,message:"Oops,there might be an error,please try again"};case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),joinSessionHandler:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.sessionIDError.error=!1,this.nicknameError.error=!1,p(this.sessionID)||(this.sessionIDError={error:!0,message:"The session id is not valid"}),""===this.nickname.trim()&&(this.nicknameError={error:!0,message:"Nickname could not be null"}),b(this.nickname)||(this.nicknameError={error:!0,message:"Nickname should only contain latin letters (lower or uppercase)"}),this.sessionIDError.error||this.nicknameError.error){t.next=12;break}return t.next=8,v.a.post(this.endpoint,{sessionID:this.sessionID});case 8:e=t.sent,200===e.status&&e.data.isExisting&&this.$router.push("/player/".concat(this.nickname,"/session/").concat(this.sessionID)),200!==e.status||e.data.isExisting||(this.sessionIDError={error:!0,message:"The session is not existed!"}),400===e.status&&(this.sessionIDError={error:!0,message:"Ohh,There might be a server error"});case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},I=k,w=(s("b8c2"),Object(a["a"])(I,d,m,!1,null,"b21e99d8",null)),y=w.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"container"}},[s("clock"),s("h2",{staticClass:"m-3"},[t._v("Session ID : "+t._s(t.sessionID))]),s("h5",[t._v(" Game controls: ")]),t.okToShowVotes?s("b-button",{staticClass:"m-3",attrs:{variant:"primary"},on:{click:t.showVotesHandler}},[t._v("Show Votes")]):t._e(),t.okToShowVotes?t._e():s("b-button",{staticClass:"m-3",attrs:{disabled:""}},[t._v("Show Votes")]),s("b-button",{staticClass:"m-3",attrs:{variant:"warning"},on:{click:t.resetVotesHandler}},[t._v("Reset Votes")]),s("div",[s("vote-status",{attrs:{session_status:t.sessionStatus}}),s("player-list",{attrs:{votes_info:t.votesInfo}})],1)],1)},D=[],j=s("8055"),O=s.n(j),x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"m-3"},["Vote in progress"===t.session_status?s("h5",[t._v(" Now voting ")]):t._e(),"Vote complete"===t.session_status?s("h5",[t._v(" Vote complete ")]):t._e()])},E=[],C={name:"VoteStatus",props:{session_status:String}},V=C,P=Object(a["a"])(V,x,E,!1,null,null,null),$=P.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-list-group",t._l(t.votes_info,(function(e,n){return s("b-list-group-item",{key:n,staticClass:"lead",style:{color:e.colorCode}},[s("strong",[t._v(" "+t._s(e.name)+"................["+t._s(e.status)+"] ")])])})),1)],1)},T=[],H={name:"PlayerList",props:{votes_info:Array}},z=H,N=Object(a["a"])(z,M,T,!1,null,null,null),L=N.exports,R={name:"Master",components:{VoteStatus:$,PlayerList:L},data:function(){return{sessionID:this.$route.params.id,votesInfo:[],uid:"",sessionStatus:"",okToShowVotes:!1,socket:O()("/")}},created:function(){var t=this;this.socket.emit("join",{sessionID:this.sessionID,name:"00000"},(function(e){var s=e.sessionObject,n=e.uid;s?(t.sessionStatus=s.status,t.uid=n,t.votesInfo=g(n,s.votesInfo)):t.$router.push("/welcome")}))},methods:{showVotesHandler:function(){this.socket.emit("showVotes",{sessionID:this.sessionID})},resetVotesHandler:function(){this.socket.emit("resetVotes",{sessionID:this.sessionID})}},mounted:function(){var t=this;this.socket.on("updatedSession",(function(e){var s=e.sessionObject;t.sessionStatus=s.status,t.okToShowVotes=s.okToShowVotes,t.votesInfo=g(t.uid,s.votesInfo)}))}},G=R,J=(s("1843"),Object(a["a"])(G,S,D,!1,null,"71d3cf63",null)),W=J.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"container"}},[s("clock"),s("h2",{staticClass:"m-3"},[t._v("Session ID : "+t._s(t.sessionID))]),s("div",{staticClass:"m-3"},[s("vote-status",{attrs:{session_status:t.sessionStatus}}),s("player-list",{attrs:{votes_info:t.votesInfo}})],1),"Vote in progress"===t.sessionStatus?[t._v(" Your Vote: "),s("div",{staticClass:"m-3"},t._l(t.cards,(function(e,n){return s("b-button",{key:n,staticClass:"m-1",attrs:{variant:"dark",size:"lg"},on:{click:function(e){return t.voteHandler(n)}}},[t._v(" [ "+t._s(e)+" ] ")])})),1)]:[s("h6",[t._v(" (i) Please wait for the Master to start another vote ")])]],2)},Y=[],Z=s("b85c"),q=s("2909"),B={name:"Player",components:{VoteStatus:$,PlayerList:L},data:function(){return{sessionID:this.$route.params.id,playerName:this.$route.params.name,uid:"",sessionStatus:"",votesInfo:[],cardDeck:[],vote:"no vote",isMasterLeft:!1,socket:O()("/")}},created:function(){var t=this;p(this.sessionID)&&""!==this.playerName.trim()&&b(this.playerName)?this.socket.emit("join",{sessionID:this.sessionID,name:this.playerName},(function(e){var s=e.sessionObject,n=e.cardDeck,r=e.uid;console.log("###",s),s?(t.sessionStatus=s.status,t.cardDeck=["no vote"].concat(Object(q["a"])(n)),t.uid=r,t.votesInfo=_(r,s.votesInfo)):t.$router.push("/welcome")})):this.$router.push("/")},mounted:function(){var t=this;this.socket.on("updatedSession",(function(e){var s=e.sessionObject,n=e.isMaster;void 0!==n&&n&&(t.isMasterLeft=!0,alert("Master Left")),t.votesInfo=_(t.uid,s.votesInfo),t.sessionStatus=s.status,"Vote complete"===t.sessionStatus&&(t.vote="no vote")}))},computed:{cards:function(){var t,e=[],s=Object(Z["a"])(this.cardDeck);try{for(s.s();!(t=s.n()).done;){var n=t.value;n===this.vote?e.push(">".concat(n,"<")):e.push(n)}}catch(r){s.e(r)}finally{s.f()}return e}},methods:{voteHandler:function(t){this.vote=this.cardDeck[t],this.socket.emit("vote",{sessionID:this.sessionID,uid:this.uid,card:this.vote})}}},F=B,K=(s("b2d2"),Object(a["a"])(F,A,Y,!1,null,"f687bc06",null)),Q=K.exports;n["default"].use(l["a"]);var U=[{path:"/welcome",name:"WelcomeScreen",component:y},{path:"/master",name:"Master",component:W,children:[{path:"session/:id",component:W}]},{path:"/player/:name",name:"Player",component:Q,children:[{path:"session/:id",component:Q}]}],X=new l["a"]({mode:"history",base:"/",routes:U}),tt=X,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"timer p-4"},[t._v(" "+t._s(t.time)+" ")])])},st=[],nt=(s("fb6a"),{name:"Clock",data:function(){return{time:""}},methods:{updateTime:function(){var t=this,e=function(){var e=new Date;t.time=t.zeroPadding(e.getHours(),2)+":"+t.zeroPadding(e.getMinutes(),2)};setInterval(e,1e3),e()},zeroPadding:function(t,e){for(var s="",n=0;n<e;n++)s+="0";return(s+t).slice(-e)}},mounted:function(){this.updateTime()}}),rt=nt,ot=(s("9906"),Object(a["a"])(rt,et,st,!1,null,"fcfd715e",null)),at=ot.exports,it=s("5f5b"),ct=s("b1e0");s("f9e3"),s("2dd8");n["default"].use(it["a"]),n["default"].use(ct["a"]),n["default"].config.productionTip=!1,n["default"].component("clock",at),new n["default"]({router:tt,render:function(t){return t(u)}}).$mount("#app")},9906:function(t,e,s){"use strict";var n=s("ee04"),r=s.n(n);r.a},ab42:function(t,e,s){},b2d2:function(t,e,s){"use strict";var n=s("4d75"),r=s.n(n);r.a},b8c2:function(t,e,s){"use strict";var n=s("ab42"),r=s.n(n);r.a},cf6e:function(t,e,s){},ee04:function(t,e,s){}});
//# sourceMappingURL=app.26a320f7.js.map